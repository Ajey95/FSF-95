<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoCalc: Scientific & String</title>
    <style>
        :root {
            --bg-color: #121212;
            --calc-bg: #1e1e1e;
            --screen-bg: #2d2d2d;
            --text-color: #ffffff;
            --accent-color: #00e5ff; /* Cyan Neon */
            --accent-hover: #00b8cc;
            --string-mode-color: #d500f9; /* Purple Neon */
            --btn-bg: #2b2b2b;
            --btn-hover: #3a3a3a;
        }

        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--bg-color);
            margin: 0;
            color: var(--text-color);
        }

        /* Calculator Container */
        .calculator {
            width: 360px;
            background-color: var(--calc-bg);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.6), 
                        0 0 15px rgba(0, 229, 255, 0.1); /* Cyan Glow */
            padding: 20px;
            transition: box-shadow 0.3s ease;
        }

        /* String Mode Glow */
        .calculator.string-mode {
            box-shadow: 0 15px 35px rgba(0,0,0,0.6), 
                        0 0 15px rgba(213, 0, 249, 0.2); /* Purple Glow */
        }

        /* Mode Toggle */
        .mode-switch {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            background: var(--screen-bg);
            border-radius: 10px;
            padding: 5px;
        }

        .mode-btn {
            flex: 1;
            border: none;
            background: transparent;
            color: #888;
            padding: 8px;
            cursor: pointer;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .mode-btn.active#math-tab {
            background-color: var(--accent-color);
            color: #121212;
            box-shadow: 0 0 10px var(--accent-color);
        }

        .mode-btn.active#str-tab {
            background-color: var(--string-mode-color);
            color: white;
            box-shadow: 0 0 10px var(--string-mode-color);
        }

        /* Display Screen */
        .display-container {
            margin-bottom: 20px;
        }

        #display {
            width: 100%;
            height: 70px;
            background-color: var(--screen-bg);
            border: none;
            border-radius: 10px;
            color: var(--text-color);
            font-size: 2rem;
            text-align: right;
            padding: 10px 15px;
            outline: none;
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.5);
        }
        
        .string-active-input {
            font-size: 1.2rem !important;
            text-align: left !important;
        }

        /* Buttons Grid System */
        .buttons-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        /* Special Math Grid: 4 columns, auto rows */
        #math-pad {
            grid-template-rows: repeat(7, 1fr);
        }

        button {
            height: 55px;
            border: none;
            border-radius: 12px;
            background-color: var(--btn-bg);
            color: var(--text-color);
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.1s, background-color 0.2s;
            user-select: none;
        }

        button:active { transform: scale(0.95); }
        button:hover { background-color: var(--btn-hover); }

        /* Grid Spans for Math Layout */
        .span-2-col { grid-column: span 2; }
        .span-2-row { grid-row: span 2; height: 100%; }

        /* Button Colors */
        .btn-op { color: var(--accent-color); font-weight: bold; }
        .btn-clear { color: #ff5252; }
        
        .btn-eq {
            background-color: var(--accent-color);
            color: #121212;
            font-weight: bold;
        }
        .btn-eq:hover { background-color: var(--accent-hover); }

        /* String Operation Buttons */
        .btn-str-op {
            background-color: rgba(213, 0, 249, 0.1);
            color: var(--string-mode-color);
            border: 1px solid rgba(213, 0, 249, 0.3);
            font-size: 0.9rem;
        }
        .btn-str-op:hover {
            background-color: var(--string-mode-color);
            color: white;
        }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="calculator" id="calc-body">
    <div class="mode-switch">
        <button class="mode-btn active" id="math-tab" onclick="switchMode('math')">Scientific</button>
        <button class="mode-btn" id="str-tab" onclick="switchMode('string')">String Ops</button>
    </div>

    <div class="display-container">
        <input type="text" id="display" placeholder="0" readonly>
    </div>

    <div class="buttons-grid" id="math-pad">
        <button class="btn-clear" onclick="clearDisplay()">AC</button>
        <button class="btn-clear" onclick="deleteChar()">DEL</button>
        <button class="btn-op" onclick="appendOp('%')">%</button>
        <button class="btn-op" onclick="appendOp('/')">÷</button>

        <button class="btn-op" onclick="sciOp('sin')">sin</button>
        <button class="btn-op" onclick="sciOp('cos')">cos</button>
        <button class="btn-op" onclick="sciOp('tan')">tan</button>
        <button class="btn-op" onclick="appendOp('*')">×</button>

        <button class="btn-op" onclick="sciOp('sqrt')">√</button>
        <button class="btn-op" onclick="appendOp('**')">^</button>
        <button class="btn-op" onclick="sciOp('log')">log</button>
        <button class="btn-op" onclick="appendOp('-')">-</button>

        <button onclick="appendNum('7')">7</button>
        <button onclick="appendNum('8')">8</button>
        <button onclick="appendNum('9')">9</button>
        <button class="btn-op span-2-row" onclick="appendOp('+')">+</button>

        <button onclick="appendNum('4')">4</button>
        <button onclick="appendNum('5')">5</button>
        <button onclick="appendNum('6')">6</button>
        <button onclick="appendNum('1')">1</button>
        <button onclick="appendNum('2')">2</button>
        <button onclick="appendNum('3')">3</button>
        <button class="btn-eq span-2-row" onclick="calculate()">=</button>

        <button onclick="appendNum('0')" class="span-2-col">0</button>
        <button onclick="appendNum('.')">.</button>
        </div>

    <div class="buttons-grid hidden" id="string-pad">
        <div style="grid-column: span 4; font-size: 0.8rem; color: #888; text-align: center; margin-bottom: 5px;">
            Type text in the box above
        </div>
        
        <button class="btn-clear" onclick="clearDisplay()">Clear Text</button>
        <button class="btn-str-op" onclick="strOp('reverse')">Reverse</button>
        <button class="btn-str-op" onclick="strOp('upper')">UPPER</button>
        <button class="btn-str-op" onclick="strOp('lower')">lower</button>

        <button class="btn-str-op" onclick="strOp('length')">Length</button>
        <button class="btn-str-op" onclick="strOp('wordcount')">Word Count</button>
        <button class="btn-str-op" onclick="strOp('vowels')">Vowels</button>
        <button class="btn-str-op" onclick="strOp('ascii')">To ASCII</button>

        <button class="btn-str-op" onclick="strOp('binary')">To Binary</button>
        <button class="btn-str-op" onclick="strOp('base64')">Base64 Enc</button>
        <button class="btn-str-op" onclick="strOp('base64dec')">Base64 Dec</button>
        <button class="btn-str-op" onclick="strOp('palindrome')">Palindrome?</button>
    </div>
</div>

<script>
    const display = document.getElementById('display');
    const mathPad = document.getElementById('math-pad');
    const strPad = document.getElementById('string-pad');
    const mathTab = document.getElementById('math-tab');
    const strTab = document.getElementById('str-tab');
    const calcBody = document.getElementById('calc-body');

    let isStringMode = false;

    // --- Mode Switching ---
    function switchMode(mode) {
        if (mode === 'math') {
            isStringMode = false;
            mathPad.classList.remove('hidden');
            strPad.classList.add('hidden');
            mathTab.classList.add('active');
            strTab.classList.remove('active');
            calcBody.classList.remove('string-mode');
            
            display.value = '';
            display.placeholder = "0";
            display.readOnly = true; 
            display.classList.remove('string-active-input');
        } else {
            isStringMode = true;
            mathPad.classList.add('hidden');
            strPad.classList.remove('hidden');
            strTab.classList.add('active');
            mathTab.classList.remove('active');
            calcBody.classList.add('string-mode');

            display.value = '';
            display.placeholder = "Type text here...";
            display.readOnly = false; 
            display.focus();
            display.classList.add('string-active-input');
        }
    }

    // --- Math Functions ---
    function appendNum(num) {
        display.value += num;
    }

    function appendOp(op) {
        const lastChar = display.value.slice(-1);
        if ("+-*/%".includes(lastChar)) {
            display.value = display.value.slice(0, -1) + op;
        } else {
            display.value += op;
        }
    }

    function clearDisplay() {
        display.value = '';
    }

    function deleteChar() {
        display.value = display.value.toString().slice(0, -1);
    }

    function sciOp(fn) {
        let val = parseFloat(display.value);
        if (isNaN(val)) return;
        switch(fn) {
            case 'sin': display.value = Math.sin(val); break;
            case 'cos': display.value = Math.cos(val); break;
            case 'tan': display.value = Math.tan(val); break;
            case 'sqrt': display.value = Math.sqrt(val); break;
            case 'log': display.value = Math.log10(val); break;
        }
    }

    function calculate() {
        try {
            display.value = eval(display.value);
        } catch (e) {
            display.value = 'Error';
        }
    }

    // --- String Functions ---
    function strOp(operation) {
        let text = display.value;
        if (!text) return;

        switch(operation) {
            case 'reverse':
                display.value = text.split('').reverse().join('');
                break;
            case 'upper':
                display.value = text.toUpperCase();
                break;
            case 'lower':
                display.value = text.toLowerCase();
                break;
            case 'length':
                display.value = "Length: " + text.length;
                break;
            case 'wordcount':
                display.value = "Words: " + text.trim().split(/\s+/).length;
                break;
            case 'vowels':
                const m = text.match(/[aeiou]/gi);
                display.value = "Vowels: " + (m ? m.length : 0);
                break;
            case 'ascii':
                display.value = text.split('').map(c => c.charCodeAt(0)).join(' ');
                break;
            case 'binary':
                display.value = text.split('').map(c => c.charCodeAt(0).toString(2)).join(' ');
                break;
            case 'base64':
                try { display.value = btoa(text); } catch(e) { display.value = "Error"; }
                break;
            case 'base64dec':
                try { display.value = atob(text); } catch(e) { display.value = "Error"; }
                break;
            case 'palindrome':
                const clean = text.replace(/[^a-zA-Z0-9]/g, '').toLowerCase();
                const rev = clean.split('').reverse().join('');
                display.value = (clean === rev) ? "True (Palindrome)" : "False";
                break;
        }
    }
</script>

</body>
</html>